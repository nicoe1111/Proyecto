<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
    <ui:composition template="/index.xhtml">
        <h:head>
            <title><ui:insert name="title">Pasar Lista</ui:insert></title>
            <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> <!--para q ande el modal-->
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
            <link rel="stylesheet" type="text/css" href="resources/css/bootstrap.min.css"/>
            <link rel="stylesheet" type="text/css" href="resources/css/custom.css"/>
                
        </h:head>
        <ui:define name="title">
            <h:outputText value="#{bundle.ListUsuarioTitle}"></h:outputText>
        </ui:define>
            
        <ui:define name="pasarLista">
            <p:layoutUnit position="south" size="60">
                <ui:insert name="footer"/>
            </p:layoutUnit>
            <h:form id="UsuarioViewForm">
                <p:panel header="#{bundle.ListUsuarioTitle}">
                    <p:dataTable id="datalist" var="user" value="#{usuarioController2.items}" 
                                 selectionMode="single" selection="#{usuarioController2.selected}"
                                 scrollable="true" 
                                 rowKey="#{user.id_user}"
                                 filteredValue="#{usuarioController2.filteredUsers}"
                                 emptyMessage="No users encontrados"
                                 widgetVar="studentsTable">
                                     
                        <p:ajax event="rowSelect" update="deleteButton editButton" listener="#{buttonBean.onRowSelect}" />
                        <p:ajax event="rowUnselect" update="deleteButton editButton" listener="#{buttonBean.onRowUnselect}" />
                            
                        <f:facet name="header">
                            <p:outputPanel>
                                <h:outputText value="Search all fields:" />
                                <p:inputText id="globalFilter" onkeyup="PF('studentsTable').filter()" style="width:150px" placeholder="Enter keyword"/>
                            </p:outputPanel>
                        </f:facet>
                            
                        <p:column headerText="Nombre" footerText="Nombre" width="200" filterStyle="display:none" filterBy="primerNombre" filterMatchMode="contains">
                            <h:outputText value="#{user.primerNombre}"/>
                        </p:column>
                        <p:column headerText="Apellido" footerText="Apellido" width="200" filterStyle="display:none" filterBy="primerApellido" filterMatchMode="contains">
                            <h:outputText value="#{user.primerApellido}" />
                        </p:column>
                        <p:column headerText="id" footerText="id" width="200" filterStyle="display:none" filterBy="id_user" filterMatchMode="contains">
                            <h:outputText value="#{user.id_user}" />
                        </p:column>
                        <f:facet name="footer">
                            <p:commandButton id="deleteButton" class="btn btn-default" value="#{bundle.Delete}" actionListener="#{usuarioController2.deleteSelected()}" disabled="#{buttonBean.disabled || empty usuarioController2.items}"/>
                            <p:commandButton id="editButton" class="btn btn-default" value="#{bundle.Edit}" update=":editarForm" disabled="#{buttonBean.disabled || empty usuarioController2.items}">
                                <f:passThroughAttribute name="data-toggle" value="modal"/>
                                <f:passThroughAttribute name="data-target" value="#ModalEditar"/>
                            </p:commandButton>
                            <p:commandButton id="createButton" class="btn btn-default" update=":registrarForm" value="#{bundle.Create}" actionListener="#{usuarioController2.setSelected(null)}">
                                <f:passThroughAttribute name="data-toggle" value="modal"/>
                                <f:passThroughAttribute name="data-target" value="#ModalRegistrar"/>
                            </p:commandButton>
                        </f:facet>
                    </p:dataTable>
                </p:panel>
            </h:form>
            <h:commandButton id="createButton1" class="btn btn-default" value="Open Modal">
                <f:passThroughAttribute name="data-toggle" value="modal"/>
                <f:passThroughAttribute name="data-target" value="#ModalRegistrar"/>
            </h:commandButton>
        </ui:define>
    </ui:composition>
        
</html>